function shiftBackground(){for(var a=0;a<=bgMap.x;a++){for(var b=0;b<=bgMap.y-2;b++){if(a==bgMap.x){if(!seenEarth&&Math.random()>0.99&&b<bgMap.y-10){bgMap.map[[a,b]]=EARTH;seenEarth=true}else{if(Math.random()>0.9){bgMap.map[[a,b]]=STAR}else{bgMap.map[[a,b]]=VOID}}}else{bgMap.map[[a,b]]=bgMap.map[[a+1,b]]}}}setTimeout(shiftBackground,150)}var bgMap={x:Math.floor(640/scl),y:Math.floor(360/scl)-1,map:[[]],initMap:function(){for(var a=0;a<=bgMap.x;a++){for(var b=0;b<=bgMap.y-2;b++){if(Math.random()>0.9){bgMap.map[[a,b]]=STAR}else{bgMap.map[[a,b]]=VOID}}}},renderMap:function(){bg2D.font="15px Lucida Console, Monaco, monospace";for(var a=0;a<=bgMap.x;a++){for(var b=0;b<=bgMap.y;b++){switch(bgMap.map[[a,b]]){case VOID:bg2D.fillStyle=gameOver?"red":"#000000";bg2D.fillText(" ",a*scl+5,b*scl+10);break;case STAR:bg2D.fillStyle=gameOver?"red":"#dddddd";bg2D.fillText(Math.random()>0.9?"*":".",a*scl+5,b*scl+10);break;case EARTH:bg2D.fillStyle=gameOver?"red":"blue";bg2D.fillText("o",a*scl+5,b*scl+10);break}}}}};